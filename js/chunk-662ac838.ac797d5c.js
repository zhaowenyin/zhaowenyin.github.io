(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-662ac838"],{"0454":function(e,t,i){"use strict";var a=i("ba52"),n=i.n(a);n.a},"08ec":function(e,t,i){"use strict";var a=i("55b2"),n=i.n(a);n.a},"4a67":function(e,t,i){"use strict";var a=i("cd90"),n=i.n(a);n.a},"4fb6":function(e,t,i){},"55b2":function(e,t,i){},"61f7":function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"a",function(){return r});var a=i("fc16"),n=i.n(a);i("6b54");function s(e,t){var i=toString.call(e),a=toString.call(t);if(i!==a)return!1;if("[object Object]"===i){for(var r in e)if(!s(e[r],t[r]))return!1;for(var l in t)if(!s(e[l],t[l]))return!1;return!0}if("[object Array]"===i){if(e.length!==t.length)return!1;for(var o=0,c=e.length;o<c;o++)if(!s(e[o],t[o]))return!1;return!0}return"[object Function]"===i?e.toString()===t.toString():n()(e,t)}function r(e){return void 0===e||null===e||""===e}},"64ee":function(e,t,i){"use strict";var a=i("c5f8"),n=i.n(a);n.a},"6bc1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"86eb":function(e,t,i){"use strict";var a=i("9809"),n=i.n(a);n.a},"8a86":function(e,t,i){var a=i("63b6");a(a.S,"Object",{is:i("6bc1")})},9809:function(e,t,i){},ba52:function(e,t,i){},bf58:function(e,t,i){},c5f8:function(e,t,i){},cd90:function(e,t,i){},cf44:function(e,t,i){i("8a86"),e.exports=i("584a").Object.is},d12a:function(e,t,i){"use strict";var a=i("bf58"),n=i.n(a);n.a},da06:function(e,t,i){"use strict";var a=i("4fb6"),n=i.n(a);n.a},e37d:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"view"},[e._v("\n  "+e._s(e.autoDataValidate)+"\n  "),i("CommonHeader",{attrs:{back:e.onBack,title:""}},[i("template",{slot:"right"},["app"===e.$route.query.source?i("div",{staticClass:"save",on:{click:e.save}},[e._v("暂存")]):e._e()])],2),e.cache_time&&"app"===e.$route.query.source?i("div",{staticClass:"cache_time"},[e._v("上次保存时间："+e._s(e.cache_time))]):e._e(),i("div",{staticClass:"title-content"},[e.title?i("div",{staticClass:"title"},[e._v("\n        "+e._s(e.title)+"66666")]):e._e(),i("span",{staticClass:"index"},[e._v(e._s(e.index+1))]),i("span",{staticClass:"index"},[e._v("/"+e._s(e.len))])]),i("div",{ref:"content",staticClass:"content"},["0"!==e.aiPrecent&&0!==e.aiPrecent?i("div",{staticClass:"warn"},[e._v("检测您近期的服务记录，已为您完成了"+e._s(e.aiPrecent)+"%问卷内容，请您审阅谢谢~")]):e._e(),i("div",{staticClass:"numIndex"}),e._l(e.currentItem,function(t){return i("div",{key:t.frontend_id,ref:t.frontend_id,refInFor:!0,staticClass:"question"},[i("Item",{attrs:{path:e.path1,data:t},on:{takePictures:e.takePictures,savePosition:e.savePosi}})],1)}),i("IOSKeyboard")],2),i("div",{staticClass:"footer"},[i("div",{class:["prev",{disabled:0===e.index}],on:{click:e.prev}},[e._v("上一页")]),i("div",{staticClass:"line"}),e.index===e.len-1?i("div",{class:["next"],on:{click:e.submit}},[e._v("提交")]):i("div",{staticClass:"next",on:{click:e.next}},[e._v("下一页")])])],1)},n=[],s=i("7618"),r=i("f499"),l=i.n(r),o=(i("96cf"),i("3b8d")),c=(i("7f7f"),i("5d73")),u=i.n(c),d=(i("7514"),i("cebc")),h=(i("cadf"),i("551c"),i("097d"),i("2f62")),v=i("76a0"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"item",staticClass:"itemView"},[e.data.name&&5!==e.data.type?i("div",{staticClass:"name"},[e.data.question.isRequired?i("i",{staticClass:"img2"},[e._v("*")]):e._e(),i("span",{staticClass:"span-name"},[e._v(e._s(9!==e.data.type?e.data.name:""))])]):e._e(),i("div",{staticClass:"itemContent"},[1===e.data.type||2===e.data.type?i("div",[i("SelectQuetion",{attrs:{data:e.data,type:1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e(),4===e.data.type?i("div",[i("NumberInputQeution",{attrs:{type:1,data:e.data},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e(),3===e.data.type?i("div",[i("TextInputQeution",{attrs:{type:1,data:e.data},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e(),7===e.data.type?i("div",[i("TimeQuetion",{attrs:{type:1,data:e.data},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e(),8===e.data.type?i("div",[i("MedicinceQuetion",{attrs:{data:e.data,type:1,path:e.path},on:{savePosition:e.savePosition},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e(),6===e.data.type?i("div",[i("Sign",{attrs:{data:e.data,disabled:!this.data.question.isEdit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e(),5===e.data.type?i("div",[i("RichText",{attrs:{data:e.data},on:{savePosition:e.savePosition}})],1):e._e(),9===e.data.type?i("div",[i("Slider",{attrs:{step:!0,disabled:!e.data.question.isEdit,min:e.data.question.options[0],max:e.data.question.options[1],leftText:e.data.question.prefix,rightText:e.data.question.postfix},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e(),10===e.data.type?i("div",[i("step",{attrs:{min:e.data.question.options[2],unit:e.data.question.postfix,disabled:!e.data.question.isEdit,max:e.data.question.options[1]},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e(),11===e.data.type?i("div",[i("TakePhoto",{attrs:{item:e.data,disabled:!e.data.question.isEdit},on:{takePictures:e.takePictures,savePosition:e.savePosition}})],1):e._e(),12===e.data.type?i("div",["app"===e.$route.query.source&&e.value?i("LaboratoryException",{attrs:{item:e.data,value:e.value},on:{savePosition:e.savePosition}}):e._e()],1):e._e(),13===e.data.type?i("div",["app"===e.$route.query.source&&e.value?i("CheckException",{attrs:{item:e.data,value:e.value},on:{savePosition:e.savePosition}}):e._e()],1):e._e(),14===e.data.type?i("div",["app"===e.$route.query.source?i("BreathingInstrument",{attrs:{path:e.path,item:e.data,value:e.value}}):e._e()],1):e._e(),e.data.error?i("div",{staticClass:"error"},[e._v(e._s(e.data.error))]):e._e()])])},p=[],y=i("8846"),b=i("b2fd"),_=i("8eb6"),m=i("d374"),x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"slider-container"},[i("div",{staticClass:"slider-content"},[e.leftText?i("p",[e._v(e._s(e.leftText))]):e._e(),e.rightText?i("p",[e._v(e._s(e.rightText))]):e._e()]),i("div",{ref:"sliderWrapper",staticClass:"slider-wrapper",on:{click:function(t){return t.preventDefault(),e.change(t)}}},[i("div",{staticClass:"num left"},[e._v(e._s(e.min))]),i("div",{staticClass:"num right"},[e._v(e._s(e.max))]),i("div",{ref:"sliderFill",staticClass:"slider-fill"}),i("div",{ref:"sliderFillBack",staticClass:"slider-fill-back"}),i("div",{ref:"slider",class:{slider:!0,start:-1===e.drag||null===e.value},style:{background:e.styleObj},on:{touchend:e.touchend,touchmove:e.move,touchstart:e.changeDrag}},[1===e.drag?i("div",{staticClass:"slider-text",style:{background:e.styleObj}},[e._v("\n        "+e._s(e.percent)+e._s(e.unit)+"\n        "),i("div",{staticClass:"slider-arrow",style:{borderColor:e.styleObj+" transparent transparent"}})]):e._e(),0===e.drag&&null!==e.value?[e._v("\n        "+e._s(e.percent)+e._s(e.unit)+"\n      ")]:-1===e.drag||1===e.drag||null===e.value?[i("p",{staticClass:"circle"}),i("p",{staticClass:"circle"}),i("p",{staticClass:"circle"})]:e._e()],2)]),e.title?i("div",{staticClass:"slider-title"},[e._v("\n    "+e._s(e.title)+"\n  ")]):e._e()])},g=[],k=(i("c5f6"),{props:{step:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},precision:{type:Number,default:0},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},value:{type:[Number,String],default:""},min:{type:Number,default:0},max:{type:Number,default:10},unit:{type:String,default:""}},data:function(){return{slider:null,drag:-1,percent:null}},created:function(){var e=this,t=this.value,i=this.min,a=this.max;""!==t&&(this.drag=0,this.percent=null!==t&&t<i?i:t>a?a:t),this.$nextTick(function(){e.setValue()})},watch:{percent:function(e){this.$emit("input",e)},value:function(e){this.percent=e}},computed:{scale:function(){var e=this.min,t=this.max;return 1/(t-e)},styleObj:function(){var e=this.percent,t=this.min,i=this.max,a=["#06D3D3","#10D2B3","#19D296","#8AD557","#FAD819","#FCC629","#FFB43A","#FE8D40","#FD6D44","#FB2B4E"],n=Math.floor((+e-t)/(i-t)*10)-1<0?0:Math.floor((+e-t)/(i-t)*10)-1;return a[n]}},methods:{change:function(e){if(this.disabled)return!1;this.drag=0;var t=this.$refs.sliderWrapper.clientWidth,i=this.min,a=this.max,n=this.precision,s=this.scale,r=this.step,l=e.pageX,o=Math.floor((t-20)*s),c=(a-i)/((t-20)/(l-49)),u=this.$refs.sliderWrapper.offsetLeft+20,d=Math.round(c),h=d*o>t-20?t-20:d*o;e.currentTarget===this.$refs.sliderWrapper&&(l<u?(h=0,this.percent=i,this.$refs.slider.style.left="0px",this.$refs.sliderFill.style.width="0px",this.$refs.sliderFillBack.style.width="100%"):l>=t+u-40?(h=t,this.percent=a,this.$refs.slider.style.left=t-20+"px",this.$refs.sliderFill.style.width=t-20+"px",this.$refs.sliderFillBack.style.width="0px"):(this.percent=0!==n?+(i+c).toFixed(n):Math.round(i+c),r?(this.$refs.slider.style.left=h+"px",this.$refs.sliderFill.style.width=h+"px",this.$refs.sliderFillBack.style.width=t-h+"px"):(this.$refs.slider.style.left=l-u+"px",this.$refs.sliderFill.style.width=l-u+"px",this.$refs.sliderFillBack.style.width=t-l+u+"px")))},setValue:function(){var e=this.scale,t=this.min,i=this.percent,a=this.precision,n=this.max,s=this.$refs.sliderWrapper.clientWidth;if(i){var r=Math.floor((s-20)*e),l=i-t,o=0;o=0===a?+Math.round(l):l,i>=n?(this.$refs.slider.style.left=s-20+"px",this.$refs.sliderFill.style.width=s-20+"px",this.$refs.sliderFillBack.style.width="0px"):(this.$refs.slider.style.left=o*r+"px",this.$refs.sliderFill.style.width=o*r+"px",this.$refs.sliderFillBack.style.width=s-o*r+"px")}else this.$refs.slider.style.left="0px",this.$refs.sliderFill.style.width="0px",this.$refs.sliderFillBack.style.width=s+"px"},changeDrag:function(e){if(this.disabled)return!1;this.drag=1,e.preventDefault()},touchend:function(e){if(this.drag=0,this.disabled)return!1;var t=this.scale,i=this.min,a=this.max,n=this.step,s=this.precision,r=e.currentTarget.offsetLeft+20,l=this.$refs.sliderWrapper.clientWidth,o=Math.floor((l-20)*t),c=(a-i)/((l-20)/(r-20)),u=Math.round(c),d=u*o;r<20?(d=0,this.percent=i):r>=l-20?(d=l-20,this.percent=a):this.percent=0!==s?+(i+c).toFixed(s):Math.round(i+c),n&&(this.$refs.slider.style.left=d+"px",this.$refs.sliderFill.style.width=d+"px",this.$refs.sliderFillBack.style.width=l-d+"px")},move:function(e){var t=this.drag,i=this.precision,a=this.max,n=this.min,s=this.disabled;if(s)return!1;if(1===t){var r=this.$refs.sliderWrapper.clientWidth,l=Math.round(e.targetTouches[0].pageX),o=this.$refs.sliderWrapper.offsetLeft+20,c=(a-n)/(r/(l-o+20));l>=r+o-20?(this.$refs.slider.style.left=r-20+"px",this.$refs.sliderFill.style.width=r-20+"px",this.$refs.sliderFillBack.style.width="0px",this.percent=a):l<o?(this.$refs.slider.style.left="0px",this.$refs.sliderFill.style.width="0px",this.$refs.sliderFillBack.style.width="100%",this.percent=n):(this.$refs.slider.style.left=l-o+"px",this.$refs.sliderFill.style.width=l-o+"px",this.$refs.sliderFillBack.style.width=r-l+o+"px",this.percent=0!==i?+(n+c).toFixed(i):Math.floor(n+c))}},init:function(){}}}),w=k,$=(i("4a67"),i("2877")),C=Object($["a"])(w,x,g,!1,null,"64cb1593",null);C.options.__file="Slider.vue";var O=C.exports,q=i("d294"),j=i("af5b"),I=i("1135"),L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"breath"},[a("div",{staticClass:"text"},[(1===+e.deviceInfo.state||2===+e.deviceInfo.state&&e.state2)&&e.deviceInfo.device_name&&e.deviceList.length>0?a("div",{staticClass:"name"},[e._v(e._s(e.deviceInfo.device_name)+" ")]):e._e(),!e.deviceInfo.state&&e.state2&&e.deviceList.length>0?a("div",[e._v("请选择肺功能仪")]):e._e(),2===e.deviceInfo.state&&e.deviceList.length>0&&e.state2?a("div",{staticClass:"occupy"},[e._v("该设备正被"+e._s(e.deviceInfo.doctor_name)+"使用，请选择其他设备")]):e._e(),1!==+e.deviceInfo.state&&e.deviceList.length>0&&!e.state2?a("div",{staticClass:"no-device"},[e._v("当前暂无可用的呼吸家肺功能仪设备")]):e._e(),1===e.deviceInfo.state&&e.deviceList.length>0?a("div",{staticClass:"already"},[e._v("已连接")]):e._e(),0===e.deviceList.length&&1!==e.deviceInfo.state?a("div",[e._v("您的账号暂未绑定设备，请联系平台运营人员")]):e._e()]),!e.deviceInfo.state&&e.state2&&e.deviceList.length>0?a("div",{class:["button",{select_buttom:e.selectLoading}],on:{click:e.selectDevice}},[e._v(e._s(e.selectLoading?"设备连接中...":"选择设备"))]):e._e(),e.deviceInfo.state&&e.deviceList.length>0?a("div",{class:["button",{select_buttom:e.selectLoading}],on:{click:e.selectDevice}},[e._v(e._s(e.selectLoading?"设备连接中...":"切换设备"))]):e._e()]),e.value&&e.value.length>0?a("DeviceTabel",{attrs:{list:e.value||[]}}):e._e(),1===e.deviceInfo.state&&e.deviceList.length>0?a("div",{class:["select-button",{select_buttom:e.selectLoading}],on:{click:e.jup}},[e.value&&e.value.length>0?a("span",[e._v("重新采集")]):a("span",[e._v("采集数据")]),a("img",{staticClass:"next-class",attrs:{src:i("ea81")}})]):e._e(),e.visible?a("SelectMenu",{attrs:{title:"肺功能仪",visible:e.visible,multiple:!1,options:e.deviceList,getItemLabel:function(e){return e.name},getItemValue:e.getItemValue},on:{"update:visible":function(t){e.visible=t},input:e.comfire}}):e._e()],1)},D=[],S=i("76e9"),F=i("ed8e"),T=i("95bb"),V=i("5308"),P={data:function(){return{visible:!1}},computed:Object(d["a"])({},Object(h["d"])("breath",{deviceList:function(e){return e.deviceList},state2:function(e){return e.state2},deviceInfo:function(e){return e.deviceInfo},state:function(e){return e.state},selectLoading:function(e){return e.selectLoading},save_device_info:function(e){return e.save_device_info},save_device_ids:function(e){return e.save_device_ids}})),watch:{path:function(){if("/html"!==this.path&&"/confirm"!==this.path&&"/medicine"!==this.path&&"/laboratory-list"!==this.path&&"/check-list"!==this.path&&"/check-detail"!==this.path&&"/selectdata"!==this.path){this.clearState(),this.saveDeviceType({devices:this.item.question.device,frontend_id:this.item.frontend_id});var e=this.item.question.device[0]&&this.item.question.device[0].device_type;this.searchList({device_type:e,vendor_id:this.save_device_ids}),this.searchDeviceList({device_type:e,vendor_id:this.save_device_ids}),this.start()}}},props:{getItemValue:{default:function(e){return e},type:Function},value:{default:null,type:null},item:{default:null,type:null},path:{default:"",type:String}},created:function(){if(this.path){this.clearState(),this.saveDeviceType({devices:this.item.question.device,frontend_id:this.item.frontend_id});var e=this.item.question.device[0]&&this.item.question.device[0].device_type;this.searchList({device_type:e,vendor_id:this.save_device_ids}),this.searchDeviceList({device_type:e,vendor_id:this.save_device_ids}),this.start()}},components:{SelectMenu:F["a"],DeviceTabel:T["a"]},methods:Object(d["a"])({},Object(h["c"])("breath",["stop","saveDeviceType","clearDivce","clearState"]),Object(h["b"])("breath",["start","searchDeviceList","searchDevice","disconnect"]),{searchList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(S["h"])(t);case 2:i=e.sent,a=i.data,this.connectDevice(a.devices);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),connectDevice:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,a,n,s,r,l,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.getCommonData("lastDevice"),!i){e.next=34;break}a=!0,n=!1,s=void 0,e.prev=5,r=u()(t);case 7:if(a=(l=r.next()).done){e.next=20;break}if(o=l.value,!i.bluetooth||o.id!==i.id){e.next=14;break}return this.searchDevice({device_id:o.bluetooth_name,info:o}),e.abrupt("break",20);case 14:if(i.bluetooth||o.id!==i.id){e.next=17;break}return this.searchDevice({device_id:o.id,info:o}),e.abrupt("break",20);case 17:a=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](5),n=!0,s=e.t0;case 26:e.prev=26,e.prev=27,a||null==r.return||r.return();case 29:if(e.prev=29,!n){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}},e,this,[[5,22,26,34],[27,,29,33]])}));function t(t){return e.apply(this,arguments)}return t}(),selectDevice:function(){this.selectLoading||(this.visible=!0)},comfire:function(e){2!==+e.state&&(e.device_id=e.bluetooth?e.bluetooth_name:e.id,this.disconnect({device_id:this.deviceInfo.device_id,isIndexChange:!0,info:e}),this.clearDivce())},jup:function(){this.selectLoading||this.$router.push({path:"/selectdata",query:{frontend_id:this.item.frontend_id}})},setCommonData:V["c"],getCommonData:V["a"]})},B=P,M=(i("08ec"),Object($["a"])(B,L,D,!1,null,"2b63a28f",null));M.options.__file="index.vue";var E=M.exports,R=i("aa60"),N=i("c1af"),W=i("3789"),A=i("23d1"),H={data:function(){return{}},props:{data:{default:function(){},type:Object},path:{default:"",type:String}},computed:{value:{get:function(){return this.data.value},set:function(e){this.data.question.isRequired&&(10!==this.data.type&&9!==this.data.type&&(!e||"[object Array]"===toString.call(e)&&0===e.length)||9===this.data.type&&null===e?this.data.error="该题为必填项":11===this.data.type&&this.data.value&&0===this.data.value.length&&"app"===this.$route.query.source?this.data.error="该题为必填项":"该题为必填项"===this.data.error&&(this.data.error="")),this.data.value=e}}},components:{Sign:y["a"],TimeQuetion:W["a"],Slider:O,Step:m["a"],TakePhoto:q["a"],LaboratoryException:j["a"],CheckException:I["a"],BreathingInstrument:E,SelectQuetion:R["a"],RichText:N["a"],NumberInputQeution:b["a"],TextInputQeution:_["a"],MedicinceQuetion:A["a"]},watch:{path:function(){"/medicine"===this.path&&8===this.data.type&&this.data.question.isRequired&&(this.data.value&&this.data.value.length>0?this.data.error="":this.data.error="该题为必填项",this.data.isaddMedicine?this.data.error="请选择药品":this.data.error="")},value:function(){11===this.data.type&&this.data.value&&0===this.data.value.length&&"app"===this.$route.query.source?this.data.error="该题为必填项":"该题为必填项"===this.data.error&&(this.data.error="")}},created:function(){},destroyed:function(){},mounted:function(){},methods:{takePictures:function(){var e=this.data.value?this.data.value:[];this.$emit("takePictures",{id:this.data.frontend_id,len:e.length})},savePosition:function(){this.$emit("savePosition",{id:this.data.frontend_id})}}},Q=H,J=(i("d12a"),Object($["a"])(Q,f,p,!1,null,"d012b990",null));J.options.__file="Item.vue";var K=J.exports,z=i("5520"),G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isIOS?i("div",{staticClass:"empty"}):e._e()},X=[],U={data:function(){return{}},computed:{isIOS:function(){return console.log(navigator.userAgent.indexOf("iPhone")),-1!==navigator.userAgent.indexOf("iPhone")}},components:{},created:function(){},methods:{}},Y=U,Z=(i("0454"),Object($["a"])(Y,G,X,!1,null,"681fbe36",null));Z.options.__file="IOSKeyboard.vue";var ee=Z.exports,te=i("61f7"),ie=i("6be8"),ae=i("2e17"),ne=i("ace7"),se={data:function(){return{index:0,path1:"",messageHandler:null,popstateHandler:null,photo:[],popupVisible:!1}},computed:Object(d["a"])({},Object(h["d"])("task",{loading:function(e){return e.loading},taskList:function(e){var t=[],i=!0,a=!1,n=void 0;try{for(var s,r=u()(e.taskList);!(i=(s=r.next()).done);i=!0){var l=s.value,o=!0,c=!1,d=void 0;try{for(var h,v=function(){var e=h.value;if(!e.question.isVisible&&!t.find(function(t){return t===e.frontend_id}))return"continue";if((1===e.type||2===e.type)&&e.value&&e.value.length>0){var i=!0,a=!1,n=void 0;try{for(var s,r=u()(e.value);!(i=(s=r.next()).done);i=!0){var l=s.value;if(e.question.options&&e.question.options.length>0){var o=!0,c=!1,d=void 0;try{for(var v,f=u()(e.question.options);!(o=(v=f.next()).done);o=!0){var p=v.value;if(p.value===l){p.visibles&&(t=t.concat(p.visibles));break}}}catch(y){c=!0,d=y}finally{try{o||null==f.return||f.return()}finally{if(c)throw d}}}}}catch(y){a=!0,n=y}finally{try{i||null==r.return||r.return()}finally{if(a)throw n}}}4!==e.type&&3!==e.type||(e.question.valuable&&e.value&&(t=t.concat(e.question.valuable)),e.question.noValue&&!e.value&&(t=t.concat(e.question.noValue)))},f=u()(l);!(o=(h=f.next()).done);o=!0)v()}catch(p){c=!0,d=p}finally{try{o||null==f.return||f.return()}finally{if(c)throw d}}}}catch(p){a=!0,n=p}finally{try{i||null==r.return||r.return()}finally{if(a)throw n}}return e.taskList.map(function(e){return e.filter(function(e){return e.question.isVisible||t.find(function(t){return t===e.frontend_id})})}).filter(function(e){return e&&e.length>0})},allData:function(e){return e.allData},positionTop:function(e){return e.positionTop},ishasType_14:function(e){return e.ishasType_14}}),{aiPrecent:function(){var e=0,t=0,i=!0,a=!1,n=void 0;try{for(var s,r=u()(this.taskList);!(i=(s=r.next()).done);i=!0){var l=s.value,o=!0,c=!1,d=void 0;try{for(var h,v=u()(l);!(o=(h=v.next()).done);o=!0){var f=h.value;t++,f.isShowAi&&e++}}catch(p){c=!0,d=p}finally{try{o||null==v.return||v.return()}finally{if(c)throw d}}}}catch(p){a=!0,n=p}finally{try{i||null==r.return||r.return()}finally{if(a)throw n}}return t?(e/t*100).toFixed(0):0},query:function(){return this.$route.query||{}},currentItem:function(){return this.taskList[this.index]||[]},title:function(){return this.allData.content&&this.allData.content.name},cache_time:function(){return Object(ie["d"])(this.allData.cache_time)},len:function(){return this.taskList.length},autoDataValidate:function(){var e=this.allData.content,t=void 0===e?{}:e,i=t.app_frontend_config,a=void 0===i?"{}":i,n=JSON.parse(a).validate||[],s=!0,r=!1,l=void 0;try{for(var o,c=u()(n);!(s=(o=c.next()).done);s=!0){var d=o.value,h=d.type,v=d.items,f=void 0===v?[]:v;if(1===h){var p=null,y=!0,b=!1,_=void 0;try{for(var m,x=u()(this.taskList);!(y=(m=x.next()).done);y=!0){var g=m.value,k=!0,w=!1,$=void 0;try{for(var C,O=u()(g);!(k=(C=O.next()).done);k=!0){var q=C.value;if(q.frontend_id===f[0]){p=q;break}}}catch(re){w=!0,$=re}finally{try{k||null==O.return||O.return()}finally{if(w)throw $}}if(p)break}}catch(re){b=!0,_=re}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}if(p){var j=f[1],I=f[2];!Object(te["a"])(j)&&!Object(te["a"])(p.value)&&+p.value>+j?p.error="".concat(p.name,"的结果，不应大于").concat(j):!Object(te["a"])(I)&&!Object(te["a"])(p.value)&&+p.value<+I?p.error="".concat(p.name,"的结果，不应小于").concat(I):p.error!=="".concat(p.name,"的结果，不应大于").concat(j)&&p.error!=="".concat(p.name,"的结果，不应小于").concat(I)||(p.error="")}}else if(2===h){var L=null,D=null,S=null,F=!0,T=!1,V=void 0;try{for(var P,B=u()(this.taskList);!(F=(P=B.next()).done);F=!0){var M=P.value,E=!0,R=!1,N=void 0;try{for(var W,A=u()(M);!(E=(W=A.next()).done);E=!0){var H=W.value;if(H.frontend_id===f[0]?L=H:H.frontend_id===f[1]?D=H:H.frontend_id===f[2]&&(S=H),L&&D&&S)break}}catch(re){R=!0,N=re}finally{try{E||null==A.return||A.return()}finally{if(R)throw N}}if(L&&D&&S)break}}catch(re){T=!0,V=re}finally{try{F||null==B.return||B.return()}finally{if(T)throw V}}L&&D&&S&&(+L.value&&+D.value?S.value=(+D.value/(+L.value/100*(+L.value/100))).toFixed(2):S.value="")}else if(3===h){var Q=null,J=null,K=!0,z=!1,G=void 0;try{for(var X,U=u()(this.taskList);!(K=(X=U.next()).done);K=!0){var Y=X.value,Z=!0,ee=!1,ie=void 0;try{for(var ae,ne=u()(Y);!(Z=(ae=ne.next()).done);Z=!0){var se=ae.value;if(se.frontend_id===f[0]?Q=se:se.frontend_id===f[1]&&(J=se),Q&&J)break}}catch(re){ee=!0,ie=re}finally{try{Z||null==ne.return||ne.return()}finally{if(ee)throw ie}}if(Q&&J)break}}catch(re){z=!0,G=re}finally{try{K||null==U.return||U.return()}finally{if(z)throw G}}Q&&J&&(f[2]&&+Q.value>+J.value?(Q.error=f[2],J.error=f[2]):f[3]&&+Q.value===+J.value?(Q.error=f[3],J.error=f[3]):f[4]&&+Q.value<+J.value?(Q.error=f[4],J.error=f[4]):(Q.error!==f[2]&&Q.error!==f[3]&&Q.error!==f[4]||(Q.error=""),J.error!==f[2]&&J.error!==f[3]&&J.error!==f[4]||(J.error="")))}}}catch(re){r=!0,l=re}finally{try{s||null==c.return||c.return()}finally{if(r)throw l}}return null}}),components:{Item:K,CommonHeader:z["a"],IOSKeyboard:ee},watch:{loading:function(e){e?v["Indicator"].open():v["Indicator"].close()},$route:function(){var e=this.$route.query.index,t=void 0===e?0:e;this.index=+t},index:function(){this.$refs.content.scrollTop=0}},beforeRouteEnter:function(e,t,i){i(function(e){var i=e.$route.query,a=i.index,n=void 0===a?0:a,s=i.serve_id,r=void 0===s?"":s,l=i.task_index,o=void 0===l?"":l,c=i.source,u=void 0===c?"app":c;if(e.index=+n,e.path1=t.path,"/medicine"!==t.path&&"/laboratory-list"!==t.path&&"/check-list"!==t.path&&"/check-detail"!==t.path&&"/magnify"!==t.path&&"/html"!==t.path||e.$nextTick(function(){e.$refs.content.scrollTop=e.positionTop}),"/html"!==t.path&&"/confirm"!==t.path&&"/medicine"!==t.path&&"/laboratory-list"!==t.path&&"/check-list"!==t.path&&"/check-detail"!==t.path&&"/selectdata"!==t.path&&"/magnify"!==t.path)if(e.clearState(),"app"===u)var d=setInterval(function(){var t=Object(V["b"])();t&&(clearInterval(d),e.getListData({id:r,task_index:o,source:u}))},500);else e.getListData({id:r,task_index:o,source:u})})},mounted:function(){},created:function(){var e=this;document.title=this.$route.query.title,this.updateOperateBegin(),this.messageHandler=this.message.bind(this),this.popstateHandler=this.popstate.bind(this),document.addEventListener("message",this.messageHandler,!1);var t=this.$route.query.source,i=void 0===t?"app":t;"app"===i&&setTimeout(function(){window.history.pushState("_android_back",null,location.href),window.addEventListener("popstate",e.popstateHandler,!1)},1e3)},destroyed:function(){document.removeEventListener("message",this.messageHandler,!1),window.removeEventListener("popstate",this.popstateHandler,!1)},methods:Object(d["a"])({},Object(h["c"])("task",["clearState","updateGps","savePosition","updateOperateBegin","showLoading","handerPhoto"]),Object(h["b"])("task",["getListData","submitCacheData"]),Object(h["b"])("breath",["disconnect"]),{popstate:function(e){window.history.pushState("_android_back",null,location.href),"_android_back"!==e.state&&this.onBack()},message:function(e){var t=JSON.parse(e.data),i=t.name,a=void 0===i?"":i,n=t.data,s=void 0===n?{}:n;"gps"===a?this.updateGps(s):"session"===a?Object(V["d"])(s):"multiImages"===a?s&&this.handerPhoto({frontend_id:this.photo,img:s}):"baseurl"===a&&Object(ne["d"])(s)},onBack:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.query.source,i=void 0===t?"app":t,"app"!==i){e.next=7;break}return this.popupVisible=!0,e.next=5,Object(v["MessageBox"])({title:"",message:"是否需要暂存当前问卷内容？",showCancelButton:!0,confirmButtonText:"确定暂存"});case 5:a=e.sent,"confirm"===a?(this.ishasType_14&&this.disconnect(),this.save({back:!0})):(this.ishasType_14&&this.disconnect(),window.postMessage(l()({name:"goBack"})));case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),prev:function(){this.index>0&&(this.index--,this.$router.push({query:Object(d["a"])({},this.$route.query,{index:this.index})}))},nextVali:function(){var e=this,t=!0,i=!1,a=void 0;try{for(var n,r=u()(this.currentItem);!(t=(n=r.next()).done);t=!0){var l=n.value;l.question&&l.question.isRequired&&(8===l.type&&(l.isaddMedicine?l.error="请选择药品":l.error=""),10!==l.type&&9!==l.type&&(!l.value||"[object Array]"===toString.call(l.value)&&0===l.value.length)||9===l.type&&null===l.value?l.error="该题为必填项":"该题为必填项"===l.error&&(l.error=""),11===l.type&&"h5"===this.$route.query.source&&(l.error=""))}}catch(y){i=!0,a=y}finally{try{t||null==r.return||r.return()}finally{if(i)throw a}}var o=!0,c=!1,d=void 0;try{for(var h,v=function(){var t=h.value;if(t.error)return e.$nextTick(function(){this.$refs.content.scrollTop=this.$refs[t.frontend_id][0].offsetTop-100}),{v:!1}},f=u()(this.currentItem);!(o=(h=f.next()).done);o=!0){var p=v();if("object"===Object(s["a"])(p))return p.v}}catch(y){c=!0,d=y}finally{try{o||null==f.return||f.return()}finally{if(c)throw d}}return!0},next:function(){this.nextVali()&&this.index<this.len-1&&(this.index++,this.$router.push({query:Object(d["a"])({},this.$route.query,{index:this.index})}))},submit:function(){this.nextVali()&&this.$router.push({path:"/confirm",query:{title:this.$route.query.title,serve_order_id:this.$route.query.serve_id,task_index:this.$route.query.task_index,source:this.$route.query.source,answer_source:this.$route.query.answer_source}})},save:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,a,n,s,r,o,c,d,h,v,f,p,y,b,_,m,x,g,k,w,$,C,O,q,j,I,L,D,S,F,T;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.showLoading(),i=JSON.parse(l()(this.taskList)),a=this.allData.citizen_id,n=[],s=!0,r=!1,o=void 0,e.prev=7,c=u()(i);case 9:if(s=(d=c.next()).done){e.next=88;break}h=d.value,v=!0,f=!1,p=void 0,e.prev=14,y=u()(h);case 16:if(v=(b=y.next()).done){e.next=71;break}if(_=b.value,m=_.id,x=_.frontend_id,g=_.type,k=_.value,6!==_.type||!/^data:image/g.test(k)){e.next=28;break}return e.next=25,Object(ae["e"])({file:k,type:9});case 25:w=e.sent,$=w.data,k=$.url;case 28:if(!_.value||11!==_.type){e.next=64;break}C=[],O=!0,q=!1,j=void 0,e.prev=33,I=u()(_.value);case 35:if(O=(L=I.next()).done){e.next=49;break}if(D=L.value,!/^data:image/g.test(D)){e.next=45;break}return e.next=40,Object(ae["e"])({file:D,type:9});case 40:S=e.sent,F=S.data,C.push(F.url),e.next=46;break;case 45:C.push(D);case 46:O=!0,e.next=35;break;case 49:e.next=55;break;case 51:e.prev=51,e.t0=e["catch"](33),q=!0,j=e.t0;case 55:e.prev=55,e.prev=56,O||null==I.return||I.return();case 58:if(e.prev=58,!q){e.next=61;break}throw j;case 61:return e.finish(58);case 62:return e.finish(55);case 63:k=C;case 64:8!==_.type&&14!==_.type||!_.value||(k=_.value.map(function(e){return e=l()(e),e})),T=[],T="[object Array]"===toString.call(k)?k:0===k||k?[k]:[],n.push({question_id:m,frontend_id:x,label_id:_.label_id,type:g,answer:T});case 68:v=!0,e.next=16;break;case 71:e.next=77;break;case 73:e.prev=73,e.t1=e["catch"](14),f=!0,p=e.t1;case 77:e.prev=77,e.prev=78,v||null==y.return||y.return();case 80:if(e.prev=80,!f){e.next=83;break}throw p;case 83:return e.finish(80);case 84:return e.finish(77);case 85:s=!0,e.next=9;break;case 88:e.next=94;break;case 90:e.prev=90,e.t2=e["catch"](7),r=!0,o=e.t2;case 94:e.prev=94,e.prev=95,s||null==c.return||c.return();case 97:if(e.prev=97,!r){e.next=100;break}throw o;case 100:return e.finish(97);case 101:return e.finish(94);case 102:this.submitCacheData({params:{serve_order_id:this.$route.query.serve_id,task_index:this.$route.query.task_index,citizen_id:a,result:n},val:t});case 103:case"end":return e.stop()}},e,this,[[7,90,94,102],[14,73,77,85],[33,51,55,63],[56,,58,62],[78,,80,84],[95,,97,101]])}));function t(t){return e.apply(this,arguments)}return t}(),savePosi:function(e){var t=this.$refs[e.id][0].offsetTop?this.$refs[e.id][0].offsetTop-100:0;this.savePosition(t)},takePictures:function(e){this.photo=e.id,window.postMessage(l()({name:"choseMultiImages",type:[1,3],maxImageCount:9-e.len}))}})},re=se,le=(i("64ee"),i("86eb"),Object($["a"])(re,a,n,!1,null,"b26c9c5e",null));le.options.__file="index.vue";t["default"]=le.exports},ed8e:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("div",{staticClass:"out"},[a("div",{staticClass:"bg",on:{click:e.close}}),a("div",{staticClass:"content"},[e.multiple?a("div",{staticClass:"the-icon"},[a("div",{staticClass:"button",on:{click:e.close}},[e._v("取消")]),a("div",{staticClass:"button confirm",on:{click:e.sure}},[e._v("确定")])]):e._e(),a("div",{staticClass:"title"},[e._v("\n      选择"+e._s(e.title)+"\n    ")]),a("div",{staticClass:"selects"},e._l(e.options,function(t,n){return a("div",{key:n,class:["check-title",e.isSelect(t)?"check":"",{disabel:2===+t.state}],on:{click:function(i){e.onItemPress(t)}}},[a("div",[e._v(e._s(e.getItemLabel(t)))]),2===+t.state?a("div",[e._v("("+e._s(t.lock_by_doctor_name)+"使用中)")]):e._e(),a("img",{staticClass:"the-img",attrs:{src:i("6f22")}})])}),0)])]):e._e()},n=[],s=i("5d73"),r=i.n(s),l=i("f499"),o=i.n(l),c=i("cebc"),u=i("61f7"),d=i("2f62"),h={props:{visible:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},options:{default:function(){return[]},type:Array},value:{default:null,type:null},onClose:{default:function(){},type:Function},getItemLabel:{default:function(e){return e},type:Function},getItemValue:{default:function(e){return e},type:Function},title:{default:"",type:String}},data:function(){return{newValue:null,timerId:1,timerObj:{}}},computed:Object(c["a"])({},Object(d["d"])("breath",{deviceInfo:function(e){return e.deviceInfo}})),watch:{visible:function(){this.newValue=JSON.parse(o()(this.value))},deviceList:function(){this.newValue=JSON.parse(o()(this.value))}},created:function(){this.stop(),this.start(),this.newValue=JSON.parse(o()(this.value))},destroyed:function(){this.deviceInfo.device_id&&this.stop()},mounted:function(){},methods:Object(c["a"])({},Object(d["b"])("breath",["searchDeviceList","start"]),Object(d["c"])("breath",["stop"]),{close:function(){this.$emit("update:visible",!1),this.onClose&&this.onClose(this),this.deviceInfo.device_id&&this.stop()},sure:function(){this.$emit("input",this.newValue),this.stop(),this.close()},isSelect:function(e){if(!this.multiple)return Object(u["b"])(this.getItemValue(e),this.newValue);if(!this.newValue)return!1;var t=!0,i=!1,a=void 0;try{for(var n,s=r()(this.newValue);!(t=(n=s.next()).done);t=!0){var l=n.value;if(Object(u["b"])(this.getItemValue(e),l))return!0}}catch(o){i=!0,a=o}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}return!1},onItemPress:function(e){if(2!==+e.state){var t=this.getItemValue(e);if(this.multiple)if(this.newValue&&this.newValue.length>0){for(var i=0,a=this.newValue.length;i<a;i++){var n=this.newValue[i];if(Object(u["b"])(t,n))return void this.newValue.splice(i,1)}this.newValue.push(t)}else this.newValue=[t];else this.newValue=t,this.sure()}}})},v=h,f=(i("da06"),i("2877")),p=Object(f["a"])(v,a,n,!1,null,"3684d04e",null);p.options.__file="SelectMenu.vue";t["a"]=p.exports},fc16:function(e,t,i){e.exports=i("cf44")}}]);